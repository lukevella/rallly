---
icon: gear
title: Configuration Options
description: Using environment variable to configure a self-hosted instance of Rallly.
---

## Environment variables

An environment variable is a dynamic value that can be set outside of an application and is used to configure or customize the behavior of an application.
This page lists all environment variables supported by Rallly.

### Base Configuration

These variables need to be configured for Rallly to run and function properly.

<ParamField path="DATABASE_URL" required>
  Postgres database connection string
</ParamField>

<ParamField path="NEXT_PUBLIC_BASE_URL" required>
  The base url where this instance is accessible, including the scheme (eg.
  `http://` or `https://`), the domain name, and optionally a port.
</ParamField>

<ParamField path="SECRET_PASSWORD" required>
  A random 32-character secret key used to encrypt user sessions
</ParamField>

<ParamField path="ALLOWED_EMAILS">
  Comma separated list of email addresses that are allowed to register and
  login. Wildcard characters are supported. Example: Setting it to
  `*@example.com` to allow anyone with a `@example.com` email address.
</ParamField>

### Email Configuration

These variables need to be configured to let Rallly send out transactional emails.

<ParamField path="NOREPLY_EMAIL">
  This email is used as the sender for all transactional emails. If not set,
  `SUPPORT_EMAIL` will be used instead.
</ParamField>

<ParamField path="SUPPORT_EMAIL" required>
  This email will be shown as the contact email for support queries.
</ParamField>

<ParamField path="SMTP_HOST" required>
  The host address of your SMTP server
</ParamField>

<ParamField path="SMTP_PORT" default="25 or 465">
  The port of your SMTP server
</ParamField>

<ParamField path="SMTP_SECURE" default="false">
  Set to "true" if SSL is enabled for your SMTP connection
</ParamField>

<ParamField path="SMTP_USER" default="">
  The username (if auth is enabled on your SMTP server)
</ParamField>

<ParamField path="SMTP_PWD" default="">
  The password (if auth is enabled on your SMTP server)
</ParamField>

<ParamField path="SMTP_TLS_ENABLED" default={"false"}>
  Enable TLS for your SMTP connection
</ParamField>

### Openid Connect Configuration

These variables needs to be configured to enable oauth 2.0 or openid connect (oidc) log in.
Rallly use [NextAuth.js](https://next-auth.js.org/) for authentication and most options are derived from the framework.
Refer to their documentation if you need more information about the following parameters.

<ParamField path="OIDC_NAME">
  The name of your oidc provider. The variable will be used to label `Log in
  with ...` button.
</ParamField>

<ParamField path="OIDC_DISCOVERY_URL">
  URL of the provider `.well-known/openid-configuration` endpoint.
</ParamField>

<ParamField path="OIDC_CLIENT_ID">
  A client id for the connection with the provider.
</ParamField>

<ParamField path="OIDC_CLIENT_SECRET">
  The secret associated with `OIDC_CLIENT_ID`.
</ParamField>

<ParamField path="OIDC_SCOPES" default="openid email profile">
  Custom scopes that should be provided when configuring the oidc client.
</ParamField>

<ParamField path="OIDC_ID_TOKEN_EXPECTED" default="true">
  When using openid connect, set OIDC_ID_TOKEN_EXPECTED to true to let next-auth
  know the provider will return an ID token.
</ParamField>

<ParamField path="OIDC_FORCE_USER_INFO" default="false">
  When using an openid connect that support userinfo endpoint, set
  `OIDC_FORCE_USER_INFO` to force next-auth to use it instead of getting
  userinfo from the ID token.
</ParamField>

<ParamField path="OIDC_USER_INFO_URL">
  When using a provider that does not provide a userinfo endpoint in its
  discovery document, you can set this to the URL of the userinfo endpoint.
  `OIDC_USER_INFO_URL` may not be usable when `OIDC_FORCE_USER_INFO` is set to
  `true`.
</ParamField>

<ParamField path="OIDC_NAME_CLAIM" default="name">
  The name of the `name` field returned by the oidc provider.
</ParamField>

<ParamField path="OIDC_EMAIL_CLAIM" default="email">
  The name of the `email` field returned by the oidc provider.
</ParamField>
